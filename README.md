# RAG (FAISS + LM Studio + Metadata + Token Control)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –ø—Ä–∏–º–µ—Ä Retrieval-Augmented Generation (RAG), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

- **FAISS** ‚Äî –±—ã—Å—Ç—Ä—ã–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **Nomic Embeddings** (—á–µ—Ä–µ–∑ LM Studio)
- **Mistral-7B-Instruct** –∏–ª–∏ –¥—Ä—É–≥—É—é LLM, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—É—é —á–µ—Ä–µ–∑ LM Studio
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º**
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤**
- **–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–±–æ—Ä–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

- `build_all.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- `run_chat.py` ‚Äî –¥–∏–∞–ª–æ–≥ —Å –ò–ò –∏ –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Q&A)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 0. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.

```bash
python -m venv venv
source venv/bin/activate   # Linux / macOS
venv\Scripts\activate      # Windows
```

### 1. –£—Å—Ç–∞–Ω–æ–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

## üí° –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä LM Studio –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –º–æ–¥–µ–ª–∏ (LLM –∏ embeddings).
2. –í —Ñ–∞–π–ª–µ `src/utils.py` —É–∫–∞–∂–∏—Ç–µ:
- `EMBEDDING_MODEL`
- `LLM_MODEL`
- –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ LM Studio `SERVER`.

3. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –ø–∞–ø–∫—É `data/`
4. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏

```bash
python build_all.py
```
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
python run_chat.py
```

6. –ó–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã ‚Äî –æ—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

.
‚îú‚îÄ data/                 ‚îÄ‚îÄ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îú‚îÄ src/                  
‚îÇ  ‚îú‚îÄ utils.py           ‚îÄ‚îÄ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îÇ  ‚îî‚îÄ ...                ‚îÄ‚îÄ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ corpus/               ‚îÄ‚îÄ –∏–Ω–¥–µ–∫—Å—ã FAISS
‚îú‚îÄ chunks.jsonl          ‚îÄ‚îÄ —á–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ embeddings_meta.json  ‚îÄ‚îÄ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îú‚îÄ embeddings.npz        ‚îÄ‚îÄ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
‚îú‚îÄ build_all.py          ‚îÄ‚îÄ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å–∞
‚îî‚îÄ run_chat.py           ‚îÄ‚îÄ —á–∞—Ç —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –±–∞–∑–µ

